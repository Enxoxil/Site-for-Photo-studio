const isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent);function testWebP(e){const t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}getAllForms(),testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}));const menuBurgerBody=document.querySelector(".menu__body"),menuBurgerIcon=document.querySelector(".action-header__icon-menu"),menuItems=document.querySelectorAll(".menu__item");for(item of menuItems)item.addEventListener("touchend",(()=>(menuBurgerBody.classList.contains("_active")&&showMenuBurger(),!1)));function showMenuBurger(){menuBurgerIcon.classList.toggle("_active"),menuBurgerBody.classList.toggle("_active"),document.body.classList.toggle("_lock")}function searchBodySlider(){return this.closest("._wrapper").querySelector("ul")}function searchNextSliderButtons(){return document.querySelectorAll("._right-arrow")}function searchPrevSliderButtons(){return document.querySelectorAll("._left-arrow")}function prevSlidePush(){searchBodySlider.call(this).insertBefore(searchBodySlider.call(this).lastElementChild,searchBodySlider.call(this).firstElementChild)}function nextSlidePush(){searchBodySlider.call(this).append(searchBodySlider.call(this).firstElementChild)}function subscribeNextClickEvent(){for(let e of searchNextSliderButtons())isMobile?e.addEventListener("touchend",nextSlidePush):e.addEventListener("click",nextSlidePush)}function subscribePrevClickEvent(){for(let e of searchPrevSliderButtons())isMobile?e.addEventListener("touchend",prevSlidePush):e.addEventListener("click",prevSlidePush)}function initSlider(){subscribeNextClickEvent(),subscribePrevClickEvent()}function getSubscribeToggleSpoilerButtons(){return document.querySelectorAll(".article__button")}function toggleSpoilerButtonHandler(){this.parentElement.parentElement.querySelector(".article__content").classList.toggle("_fullText"),this.parentElement.parentElement.querySelector(".article__button").classList.toggle("_activeButtonSpoiler")}function subscribeToggleSpoiler(){for(let e of getSubscribeToggleSpoilerButtons())e.addEventListener("click",toggleSpoilerButtonHandler)}function initSubscribeToggleSpoiler(){subscribeToggleSpoiler()}function getSmoothScrollLinks(){return document.querySelectorAll('a[href^="#"]')}function onClickScrollLinkHandler(e){document.querySelector(e.getAttribute("href")).scrollIntoView({behavior:"smooth",block:"start"})}function subscribeScrollLink(){for(let e of getSmoothScrollLinks())isMobile?e.addEventListener("touchend",(function(t){t.preventDefault(),onClickScrollLinkHandler(e)})):e.addEventListener("click",(function(t){t.preventDefault(),onClickScrollLinkHandler(e)}))}function initSmoothScroll(){subscribeScrollLink()}menuBurgerBody.addEventListener("touchend",(()=>(menuBurgerBody.classList.contains("_active")&&showMenuBurger(),!1))),menuBurgerIcon.addEventListener("touchend",(()=>(menuBurgerIcon&&showMenuBurger(),!1))),document.addEventListener("keydown",(function(e){"Escape"===e.key&&menuBurgerBody.classList.contains("_active")&&showMenuBurger()})),initSlider(),initSubscribeToggleSpoiler(),initSmoothScroll();const url="https://jsonplaceholder.typicode.com/todos";async function sendForm(e){try{const t=await fetch(url,{method:"POST",body:e}),o=await t.json();console.log(o)}catch(e){console.log("Error: ",e)}finally{console.log("Finally")}}function resetForm(e){e.target.reset()}function collectionData(e){const t=new FormData(e);return Object.fromEntries(t.entries())}function onSubmit(e,t){sendForm(collectionData(e)),closeModal(t),resetForm(t)}function subscribeSubmitForms(e){for(currentForm of e)currentForm.classList.contains("_form")&&currentForm.addEventListener("submit",(e=>{e.preventDefault();const{currentTarget:t}=e;onSubmit(t,e)}))}function getAllForms(){subscribeSubmitForms(document.forms)}function subscribeCloseModalFieldMobile(){document.addEventListener("touchend",(function(e){!e.target.closest("._modalNoCloseField")&&e.target.closest("._modalActive")&&closeModal(e)}))}function subscribeCloseModalFieldPC(){document.addEventListener("click",(function(e){!e.target.closest("._modalNoCloseField")&&e.target.closest("._modalActive")&&closeModal(e)}))}function subscribeCloseModalField(){isMobile?subscribeCloseModalFieldMobile():subscribeCloseModalFieldPC()}function initSubscribeCloseModalField(){subscribeCloseModalField()}function escCloseModalHandler(){document.addEventListener("keydown",(function(e){let t=document.querySelector("._modalActive");return"Escape"===e.key&&t&&(t.classList.remove("_modalActive"),document.body.classList.remove("_lock"),isMobile||(document.documentElement.style.marginRight="",document.querySelector(".header__wrapper").style.paddingRight="")),!1}))}function initEscCloseModalHandler(){escCloseModalHandler()}function getArrayCloseModalButtons(){return document.querySelectorAll("._closeModalBtn")}function subscribeCloseModalButtonMobile(e){e.addEventListener("touchstart",(function(e){sectionFormFeedback.classList.contains("_modalActive")&&closeModal(e)}))}function subscribeCloseModalButtonPC(e){e.addEventListener("click",(function(e){sectionFormFeedback.classList.contains("_modalActive")&&closeModal(e)}))}function subscribeCloseModalButton(){for(button of getArrayCloseModalButtons())isMobile?subscribeCloseModalButtonMobile(button):subscribeCloseModalButtonPC(button)}function initSubscribeCloseModalButton(){subscribeCloseModalButton()}initSubscribeCloseModalField(),initEscCloseModalHandler(),initSubscribeCloseModalButton();const sectionFormFeedback=document.querySelector(".feedback"),openFormFeedbackButton=document.querySelector(".main-content__button");function getScrollbarWidth(){return window.innerWidth-document.documentElement.clientWidth}function showFeedbackModal(){let e=`${getScrollbarWidth()}px`;document.body.classList.add("_lock"),isMobile?sectionFormFeedback.classList.add("_modalActive"):(sectionFormFeedback.classList.add("_modalActive"),document.documentElement.style.marginRight=e,document.querySelector(".header__wrapper").style.paddingRight=e)}function closeModal(e){let t=e.target.closest("._modal");t&&(t.classList.remove("_modalActive"),document.body.classList.remove("_lock"),isMobile||(document.documentElement.style.marginRight="",document.querySelector(".header__wrapper").style.paddingRight=""))}isMobile?openFormFeedbackButton.addEventListener("touchend",showFeedbackModal):openFormFeedbackButton.addEventListener("click",showFeedbackModal);